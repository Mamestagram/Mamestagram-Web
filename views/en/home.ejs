<!DOCTYPE html>
<html lang="ja">
    <head>
        <title>Dashboard | Mamestagram</title>
        <%- include("references/head", { currentTime }) %>
        <link rel="stylesheet" href="/css/home.css?<%= currentTime %>" />
        <link rel="stylesheet" href="/css/common/odometer-theme-minimal.css?<%= currentTime %>" />
    </head>
    <body>
        <%- include("references/loading") %>
        <%- include("references/header", { currentTime }) %>
        <main>
            <h1>Mamestagram</h1>
            <div class="pp-record-user">
                <div class="boxes">
                    <% let user; %>
                    <div class="focused-user-score-data"></div>
                    <div class="flex-box vanilla selected">
                        <% for (let i = 2, n = 0; i <= 6; i++, n++) { %>
                            <% user = ppRecords[`mode${i % 4}`]; %>
                            <div class="user<%= n === 2 ? " focused" : n === 0 || n === 4 ? " edge" : "" %> anim-end">
                                <div class="wrap" style="background-image: url('https://a.mamesosu.net/<%= user.id %>?<%= currentTime %>')">
                                    <p class="mode-title"><i class="mode-icon mode-<%= functions.modeName(i % 4) %>"></i>vn!<%= functions.modeName(i % 4) %></p>
                                </div>
                                <h3>
                                    <i class="mode-icon mode-<%= functions.modeName(i % 4) %>"></i>vn!<%= functions.modeName(i % 4) %>
                                    <span class="country-flag">
                                        <i class="flag-icon flag-icon-<%= user.country %>"></i>
                                        <p class="tooltip"><%= user.country.toUpperCase() %></p>
                                    </span>
                                    <a href="/" class="username"><%= user.name %></a>
                                </h3>
                                <p class="pp"><%= Math.round(user.pp).toLocaleString() %>pp</p>
                                <div class="score-data" style="background-image: url('https://assets.ppy.sh/beatmaps/<%= user.set_id %>/covers/cover.jpg?');">
                                    <span class="map-name"><%= user.artist %> - <%= user.title %></span>
                                    <span class="map-diff">[<%= user.version %>]</span>
                                    <div class="map-score-details">
                                        <img src="/images/grades/<%= user.grade %>.webp?<%= currentTime %>" alt="" />
                                        <div class="tables">
                                            <table class="t1">
                                                <tr>
                                                    <th>Total Score</th>
                                                    <th>Accuracy</th>
                                                    <th>Max Combo</th>
                                                </tr>
                                                <tr>
                                                    <td><%= user.score.toLocaleString() %></td>
                                                    <td><%= user.acc.toFixed(2) %>%</td>
                                                    <td><%= user.max_combo.toLocaleString() %></td>
                                                </tr>
                                            </table>
                                            <table class="t2">
                                                <tr>
                                                    <% if (i % 4 === 0) { %> <!-- std -->
                                                        <th>300</th>
                                                        <th>100</th>
                                                        <th>50</th>
                                                    <% } else if (i % 4 === 1) { %> <!-- taiko -->
                                                        <th>Great</th>
                                                        <th>Good</th>
                                                    <% } else if (i % 4 === 2) { %> <!-- ctb -->
                                                        <th>Fruits</th>
                                                        <th>Tricks</th>
                                                        <th>Drop</th>
                                                    <% } else if (i % 4 === 3) { %> <!-- mania -->
                                                        <th>Merv</th>
                                                        <th>Perf</th>
                                                        <th>Great</th>
                                                        <th>Good</th>
                                                        <th>Bad</th>
                                                    <% } %>
                                                    <th>Miss</th>
                                                    <th>Time</th>
                                                    <th>Mods</th>
                                                </tr>
                                                <tr>
                                                    <% if (i % 4 === 0 || i % 4 === 2) { %> <!-- std | ctb -->
                                                        <td><%= user.n300.toLocaleString() %></td>
                                                        <td><%= user.n100.toLocaleString() %></td>
                                                        <td><%= user.n50.toLocaleString() %></td>
                                                    <% } else if (i % 4 === 1) { %> <!-- taiko -->
                                                        <td><%= (user.ngeki + user.n300).toLocaleString() %></td>
                                                        <td><%= (user.nkatu + user.n100).toLocaleString() %></td>
                                                    <% } else if (i % 4 === 3) { %> <!-- mania -->
                                                        <td><%= user.ngeki.toLocaleString() %></td>
                                                        <td><%= user.n300.toLocaleString() %></td>
                                                        <td><%= user.nkatu.toLocaleString() %></td>
                                                        <td><%= user.n100.toLocaleString() %></td>
                                                        <td><%= user.n50.toLocaleString() %></td>
                                                    <% } %>
                                                    <td><%= user.nmiss.toLocaleString() %></td>
                                                    <td><%= user.play_time %></td>
                                                    <td><%= user.mods %></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% } %>
                    </div>
                    <div class="flex-box relax">
                        <% for (let i = 5, n = 0; i <= 10; i++, n++) { %>
                            <% if (i % 4 + 4 !== 7) { %>
                                <% user = ppRecords[`mode${i % 4 + 4}`]; %>
                                <div class="user<%= n === 2 ? " focused" : n === 0 || n === 4 ? " edge" : "" %> anim-end">
                                    <div class="wrap" style="background-image: url('https://a.mamesosu.net/<%= user.id %>?<%= currentTime %>')">
                                        <p class="mode-title"><i class="mode-icon mode-<%= functions.modeName(i % 4) %>"></i>rx!<%= functions.modeName(i % 4) %></p>
                                    </div>
                                    <h3>
                                        <i class="mode-icon mode-<%= functions.modeName(i % 4) %>"></i>rx!<%= functions.modeName(i % 4) %>
                                        <span class="country-flag">
                                            <i class="flag-icon flag-icon-<%= user.country %>"></i>
                                            <p class="tooltip"><%= user.country.toUpperCase() %></p>
                                        </span>
                                        <a href="/" class="username"><%= user.name %></a>
                                    </h3>
                                    <p class="pp"><%= Math.round(user.pp).toLocaleString() %>pp</p>
                                </div>
                            <% } else {
                                n--;
                            } %>
                        <% } %>
                    </div>
                    <div class="flex-box auto-pilot">
                        <div class="user focused anim-end">
                            <div class="wrap" style="background-image: url('https://a.mamesosu.net/<%= user.id %>?<%= currentTime %>')">
                            </div>
                            <h3>
                                <i class="mode-icon mode-std"></i>ap!std
                                <span class="country-flag">
                                    <i class="flag-icon flag-icon-<%= user.country %>"></i>
                                    <p class="tooltip"><%= user.country.toUpperCase() %></p>
                                </span>
                                <a href="/" class="username"><%= user.name %></a>
                            </h3>
                            <p class="pp"><%= Math.round(user.pp).toLocaleString() %>pp</p>
                        </div>
                    </div>
                </div>
                <ul class="special-switch">
                    <li class="vanilla selected"><span>Vanilla</span></li>
                    <li class="relax"><span>Relax</span></li>
                    <li class="auto-pilot"><span>Auto Pilot</span></li>
                </ul>
            </div>
            <div class="list">
                <h2>Server Status</h2>
                <div class="server-st">
                    <div class="player-wrap current">
                        <i class="fa-solid fa-user" style="color: #4580f7;"></i>: 
                        <div id="players-online" class="odometer"><%= online %></div>
                    </div>
                    <div class="player-wrap total">
                        <i class="fa-duotone fa-solid fa-users"></i>: 
                        <div id="players-total" class="odometer"><%= total %></div>
                    </div>
                </div>
            </div>
        </main>
        <%- include("references/footer", { 
            currentTime,
            developer,
            contributor,
            moderator,
            nominator
        }) %>
        <%- include("references/script", { currentTime }) %>
        <script src="/js/home.js?<%= currentTime %>" defer></script>
        <script src="/js/common/odometer.min.js?<%= currentTime %>" defer></script>
    </body>
</html>